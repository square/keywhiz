sudo: required
dist: trusty

jdk:
  - oraclejdk8

services:
  - mysql

cache:
  directories:
    - $HOME/.m2

before_install:
  # Extra Chrome setup from: http://stackoverflow.com/questions/19255976
  - export CHROME_BIN=chromium-browser
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - npm install karma && npm install karma-jasmine karma-chrome-launcher
  - cd ui && npm install -g grunt-cli bower
  - npm install
  - bower install
  - grunt build && cd ..

script:
  - mvn test -P mysql
  - "mvn compile findbugs:check"
  - cd ui && grunt test
